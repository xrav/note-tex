\chapter{Экспериментальный раздел}
\label{cha:research}

В данном разделе рассматриваются результаты скорости работы подсистемы распознования данных, решения, вывода.

Эксперименты проводились на мобильном устройстве Google Nexus 4:
\begin{itemize}
	\item процессор: Qualcomm APQ8064, 1500 МГц, 4 ядра;
	\item оперативная память: 2GB;
	\item фронтальная камера: 8 МПикс;
	\item ОС: Android 4.4.
\end{itemize}

Робот LEGO Mindstorm NXT 2 имеет следующие характеристики:

\begin{itemize}
	\item основной процессор: Atmel ARM7 AT91SAM7S256, частота 48 МГц, 32-битный;
	\item сопроцессор: Atmel AVR ATmega48, частота 8 МГц, 8-битный;
	\item память: 16Кб ППЗУ, 512 байт ОЗУ процессора и  32Кб внешнего ОЗУ;
	\item 256 Кб FLASH, 64 Кб ОЗУ основного процессора, и 4Кб FLASH, 8 Кб ОЗУ сопроцессора.
\end{itemize}


\section{Анализ результатов распознавания}


В качестве примера для работы будет рассматривать время распознавания картинки с заданием.

Входными данными для задачи являются:

\begin{itemize}
	\item фотография с заданием.
\end{itemize}

В качестве результата выполнения эксперимента получим время работы затраченное на выполнение каждого этапа из:

% \renewcommand{\labelenumi}{\arabic{enumi})}

\begin{enumerate}
	\item захват фото,
	\item конвертация в черно-белый цвет,
	\item определение угла поворота,
	\item определение сетки,
	\item распознавание цифр,
	\item корректировка распознавания.
\end{enumerate}
	
Результаты времени распознавания представлены в табл.~\ref{tab:tres}
\begin{table}[ht]
  \caption{Результаты времени распознавания}
  \begin{tabular}{|p{9cm}|p{5.5cm}|}
  \hline
  Операция & Время, мс \\
  \hline
  1) захват фото & 2\\
  \hline
  2) конвертация в черно-белый цвет, & 13 \\
  \hline
  3) определение угла поворота, & 1 \\
  \hline
  4) определение сетки &  13 \\
  \hline
  5) распознавание цифр & 7 \\
  \hline
  6) корректировка распознавания &  1\\
  \hline
  \end{tabular}
  \label{tab:tres}
\end{table}

Самые длительными этапами являются процессы конвертации и определения сетки.

Операция конвертации является длительной из-за того, что пороги считаются для каждого пикселя, ведь алгоритм требует огромного количества чтений пикселя изображения и подсчета для области. И даже целочисленная форма, которая помогает ускорить этот алгоритм, все-равно оставляет эту операцию длительной.

Определение сетки длительный алгоритм потому, что для каждого пикселя проводится 180 воображаемых линий с шагом в 1 градус, которые потом уйдут на «голосование».

В остальном обработка большого зашумленного изображения на смартфоне за 37 мс это хороший результат.

\begin{figure}[ht]
 \centering
 \begin{tikzpicture}
    \begin{axis}[
  		symbolic x coords={1, 2, 3, 4, 5, 6},
        ylabel = {Время, мс},
        xlabel = {Операция, согласно номеру в табл.~\ref{tab:tres}},
    xtick=data]
    \addplot[ybar] coordinates {
        (1,2)
        (2,13)
        (3,1)
    (4, 13)
    (5,7)
    (6,1)
    };
    \end{axis}
 \end{tikzpicture}
 \caption{Гистограмма времени операций}
 \label{fig:ChDD}
\end{figure}

\section{Анализ результатов решения}

Сложность алгоритма определяется глубиной рекурсии для каждого кандидата.

При правильно поставленном задании не должно быть большое количество рекурсий, т.к. по правилам Судоку имеется единственное верное решение. 

Но в реальной жизни под сложными пазлами подаются задачи, которые имееют большое ветвление и в реальности могут иметь несколько решений, эти задачи нам тоже решать.

\paragraph{Простой пазл} - пазл который имеет для первого разбора не более 3 кандидатов.

\paragraph{Обычный пазл} - пазл который имеет для первого разбора от 4 до 6 кандидатов.

\paragraph{Сложный пазл} - пазл который имеет для первого более 6 кандидатов.

Результаты решения представлены в табл.~\ref{tab:tres2}

\begin{table}[ht]
  \caption{Время решения пазлов}
  \begin{tabular}{|p{9cm}|p{5.5cm}|}
  \hline
  Сложность пазла & Время, мс \\
  \hline
  простой пазл & 1\\
  \hline
  простой пазл & 2\\
  \hline
  сложный пазл & 18\\
  \hline
  \end{tabular}
  \label{tab:tres2}
\end{table}


\begin{figure}[ht]
 \centering
 \begin{tikzpicture}
    \begin{axis}[
  		symbolic x coords={easy, medium, hard},
        ylabel = {Время, мс},
        xlabel = {Сложность пазла, согласно  табл.~\ref{tab:tres2}},
    xtick=data]
    \addplot[ybar] coordinates {
        (easy,6)
        (medium,12)
        (hard,47)
    };
    \end{axis}
 \end{tikzpicture}
 \caption{Гистограмма времени операций}
 \label{fig:ChDD1}
\end{figure}

В начале расположены два быстрых метода, и только если им не удаётся решить пазл, управление переходит к решению методом перебора.

Только если методы открытых и скрытых пар не могут решить пазл, программа начинает перебирать значения. Также существует три попытки, после чего программа завершается. Между каждой попыткой, рекурсивная последовательность переставляется случайным образом с надеждой, что новая последовательность поможет решить пазл быстрее. 

Если сложность пазла не очень высока и не доходит до метода перебора, то пазлы решаются в $2$ или $8$ раз быстрее.

Решение для легких пазлов и средних превышают всего на 2 мс на роботе с не очень мощным процессором и медленным ОЗУ решение такой же задачи на ПК, с характеристиками в десятки раз превышающими характеристики робота.

Но мы не можем отказаться от алгоритма перебора, т.к. он гарантировано приведет к решению.

\section{Время результатов вывода решения}

Вывод одного символа на лист бумаги занимает в среднем 4.8 сек при выводе решения на бумагу формата А4.

Для заполнения всей таблицы нам необходимо около 6 минут.

Столь длительный вывод объясняется тем, что управляющие двигатели манипулятора не позволяют работать с большей мощностью, иначе изображение получается не четким.

При выборе большего формата бумаги, можно увеличить мощность двигателей, но будет затрачиваться большего на рисование более крупного символа.


